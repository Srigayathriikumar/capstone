<nav class="top-navbar">
  <div class="navbar-content">
    <!-- Left Side -->
    <div class="navbar-left">
      <button class="sidebar-toggle" (click)="onToggleSidebar()">
        <i class="pi pi-bars"></i>
      </button>
      
      <div class="project-switcher-nav" *ngIf="showProjectSwitcher">
        <button class="project-switcher-btn" (click)="toggleProjectSwitcher()">
          <i class="pi pi-th-large"></i>
          <span>{{ currentProject?.name || 'Select Project' }}</span>
          <i class="pi pi-angle-down"></i>
        </button>
      </div>
      
      <div class="breadcrumb" *ngIf="breadcrumbs.length > 0">
        <span class="breadcrumb-item" *ngFor="let crumb of breadcrumbs; let last = last">
          {{ crumb }}
        </span>
        <i class="pi pi-angle-right breadcrumb-separator" *ngIf="!last"></i>
      </div>
    </div>

    <!-- Right Side -->
    <div class="navbar-right">
      <!-- Search Bar -->
      <div class="search-bar" *ngIf="showSearch">
        <i class="pi pi-search search-icon"></i>
        <input 
          type="text" 
          class="search-input" 
          [placeholder]="searchPlaceholder"
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
        >
      </div>

      <!-- User Profile -->
      <div class="user-profile" (click)="onUserMenuClick()" *ngIf="currentUser">
        <div class="user-avatar">
          {{ currentUser.username?.charAt(0)?.toUpperCase() || 'U' }}
        </div>
        <div class="user-info" *ngIf="currentUser.username">
          <div class="user-name">{{ currentUser.username }}</div>
          <div class="user-role">{{ currentUser.role || 'Member' }}</div>
        </div>
        <i class="pi pi-chevron-down user-dropdown-icon"></i>
      </div>

      <!-- Sign In Button (when no user) -->
      <button class="btn btn-primary" *ngIf="!currentUser">
        <i class="pi pi-sign-in"></i>
        Sign In
      </button>
    </div>
  </div>
</nav>

<!-- Project Switcher Modal -->
<div class="project-switcher-overlay" *ngIf="showProjectSwitcherModal" (click)="closeProjectSwitcher()">
  <div class="project-switcher-modal" (click)="$event.stopPropagation()">
    <div class="switcher-header">
      <h3>Switch Project</h3>
      <button class="close-switcher" (click)="closeProjectSwitcher()">Ã—</button>
    </div>
    <div class="projects-grid">
      <div class="project-card" 
           *ngFor="let project of allProjects" 
           [class.current]="project.id === currentProject?.id"
           (click)="selectProject(project)">
        <div class="project-icon">
          <i class="pi pi-folder"></i>
        </div>
        <div class="project-info">
          <h4>{{ project.name }}</h4>
          <p>{{ project.description }}</p>
        </div>
        <div class="project-status" [class]="getStatusClass(project.status)">{{ project.status }}</div>
      </div>
    </div>
  </div>
</div>
