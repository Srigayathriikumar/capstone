<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <img src="logo.png" alt="TRAM Logo" class="logo">
        <h1>TRAM Dashboard</h1>
      </div>
      <div class="user-info">
        <span>Welcome, {{ currentUser?.username }}</span>
        <button class="logout-btn" (click)="logout()">Logout</button>
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <div class="dashboard-layout">
      <!-- Calendar Sidebar (Left) -->
      <aside class="user-sidebar">
        <div class="user-profile">
          <div class="user-avatar">
            {{ currentUser?.username?.charAt(0)?.toUpperCase() }}
          </div>
          <h3>{{ currentUser?.username }}</h3>
          <p class="user-role">{{ currentUser?.role }}</p>
        </div>
        
        <div class="user-stats">
          <div class="stat-item">
            <span class="stat-label">Projects</span>
            <span class="stat-value">{{ teams.length }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Members</span>
            <span class="stat-value">{{ getTotalMembers() }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Resources</span>
            <span class="stat-value">{{ getTotalResources() }}</span>
          </div>
        </div>
        
        <!-- Mini Calendar -->
        <div class="mini-calendar">
          <div class="calendar-header">
            <h4>{{ getCurrentMonth() }}</h4>
            <p class="current-time">{{ getCurrentTime() }}</p>
          </div>
          <div class="calendar-grid">
            <div class="day-header" *ngFor="let day of ['S','M','T','W','T','F','S']">{{ day }}</div>
            <div class="calendar-day" 
                 *ngFor="let day of getCalendarDays()" 
                 [class.today]="day.isToday"
                 [class.other-month]="day.isOtherMonth">
              {{ day.date }}
            </div>
          </div>
        </div>
      </aside>
      
      <!-- Main Content -->
      <div class="main-content">
    <div class="teams-section">
      <h2>PROJECT CARDS</h2>
      
      <div class="loading" *ngIf="loading">
        <div class="spinner"></div>
        <p>Loading Projects...</p>
      </div>

      <div class="teams-grid" *ngIf="!loading">
        <div 
          class="team-card" 
          *ngFor="let team of teams" 
          (click)="viewTeamDetails(team.id)"
        >
          <div class="team-header">
            <h3>{{ team.name }}</h3>
            <div class="status-container">
              <select 
                *ngIf="isAdmin() || isManager()" 
                class="status-dropdown" 
                [value]="team.status" 
                (change)="updateTeamStatus(team.id, $event)"
                (click)="$event.stopPropagation()"
              >
                <option value="ACTIVE">ACTIVE</option>
                <option value="INACTIVE">INACTIVE</option>
                <option value="COMPLETED">COMPLETED</option>
                <option value="ARCHIVED">ARCHIVED</option>
              </select>
              <span 
                *ngIf="!isAdmin() && !isManager()" 
                class="team-status" 
                [class]="getStatusClass(team.status)"
              >
                {{ team.status }}
              </span>
            </div>
          </div>
          
          <p class="team-description">{{ team.description }}</p>
          
          <div class="team-stats">
            <div class="stat">
              <span class="stat-number">{{ team.memberCount}}</span>
              <span class="stat-label">Members</span>
            </div>
            <div class="stat">
              <span class="stat-number">{{ team.resourceCount}}</span>
              <span class="stat-label">Resources</span>
            </div>
          </div>
          
          <div class="team-footer">
            <span class="created-date">Created: {{ team.createdAt | date:'shortDate' }}</span>
            <span class="view-details">View Details â†’</span>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="!loading && teams.length === 0">
        <h3>No teams found</h3>
        <p>You don't have access to any teams yet.</p>
      </div>
    </div>
    
    <!-- Quick Actions Section -->
    <div class="bottom-sections">
      <div class="section-card">
        <h3>Quick Actions</h3>
        <div class="quick-actions">
          <button class="action-btn" (click)="createNewTeam()">
            <i class="pi pi-plus"></i>
            <span>Create Team</span>
          </button>
          <button class="action-btn" (click)="viewAllTeams()">
            <i class="pi pi-list"></i>
            <span>View All Teams</span>
          </button>
          <button class="action-btn" (click)="viewReports()">
            <i class="pi pi-chart-bar"></i>
            <span>View Reports</span>
          </button>
        </div>
      </div>
      
      <div class="section-card">
        <h3>System Status</h3>
        <div class="status-indicators">
          <div class="status-item">
            <div class="status-dot online"></div>
            <span>System Online</span>
          </div>
          <div class="status-item">
            <div class="status-dot"></div>
            <span>{{ getOnlineUsers() }} Users Online</span>
          </div>
          <div class="status-item">
            <div class="status-dot"></div>
            <span>Last Backup: {{ getLastBackup() }}</span>
          </div>
        </div>
      </div>
    </div>
      </div>
      
      <!-- Activity Sidebar (Right) -->
      <aside class="right-sidebar">
        <div class="sidebar-section">
          <h3>Recent Activity</h3>
          <div class="activity-feed">
            <div class="activity-item" *ngFor="let activity of getRecentActivity()">
              <div class="activity-icon" [class]="activity.type">
                <i [class]="activity.icon"></i>
              </div>
              <div class="activity-content">
                <p class="activity-text">{{ activity.text }}</p>
                <span class="activity-time">{{ activity.time }}</span>
              </div>
            </div>
          </div>
        </div>
        

      </aside>
    </div>
  </main>
</div>